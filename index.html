<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma Integrada SENAI V2</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="app-container">

        <div id="login-screen" class="screen active">
            <!-- ... (c√≥digo do login screen inalterado) ... -->
             <div class="login-container">
                 <h2>
                     <span class="logo-placeholder">SENAI Blumenau</span>
                     <br> Plataforma Integrada
                 </h2>
                 <form id="login-form">
                     <div class="form-group">
                         <label for="username">Usu√°rio/E-mail:</label>
                         <input type="text" id="username" name="username" value="admin" required>
                     </div>
                     <div class="form-group">
                         <label for="password">Senha:</label>
                         <input type="password" id="password" name="password" value="password" required>
                     </div>
                     <div class="form-actions">
                         <button type="submit" class="btn btn-primary">Entrar</button>
                         <a href="#" class="forgot-password">Esqueci minha senha</a>
                     </div>
                 </form>
                 <!-- Link tempor√°rio para testar a tela de falha -->
                 <div style="margin-top: 15px;">
                    <a href="#fault-report" id="test-fault-report-link">Testar Tela de Relat√≥rio de Falha</a>
                 </div>
             </div>
        </div>

        <div id="main-app" class="screen">
            <!-- ... (sidebar e outras content-sections inalteradas) ... -->
            <nav class="sidebar">
                 <h3>Menu</h3>
                 <ul>
                     <li><button class="nav-btn" data-target="dashboard-screen"> <i class="icon">üìä</i> Dashboard</button></li>
                     <li><button class="nav-btn" data-target="demand-list-screen"> <i class="icon">üìã</i> Ver Chamados</button></li>
                     <li><button class="nav-btn" data-target="demand-register-screen"> <i class="icon">üìù</i> Registrar Demanda</button></li>
                     <li><button class="nav-btn" data-target="history-screen"> <i class="icon">üìú</i> Hist√≥rico Manuten√ß√£o</button></li>
                     <li><button class="nav-btn" data-target="chat-screen"> <i class="icon">üí¨</i> Chat Suporte</button></li>
                     <li><button class="nav-btn" data-target="stock-screen"> <i class="icon">üì¶</i> Gest√£o de Estoque</button></li>
                     <li><button class="nav-btn" data-target="environments-screen"> <i class="icon">üè¢</i> Cadastro Ambientes</button></li>
                     <li><button id="logout-btn" class="nav-btn"> <i class="icon">üö™</i> Sair</button></li>
                 </ul>
            </nav>

            <main class="main-content">
                <!-- ... (dashboard, demand-list, demand-register, history, chat, stock inalterados) ... -->
                 <div id="dashboard-screen" class="content-section active">
                      <h2>Dashboard Principal</h2>
                     <div class="dashboard-grid">
                         <div class="dashboard-card">
                             <h3>Alertas</h3>
                             <ul id="dashboard-alerts">
                                 <li>Carregando alertas...</li>
                             </ul>
                         </div>
                         <div class="dashboard-card">
                             <h3>Atividades Recentes</h3>
                              <ul id="dashboard-recent-activities">
                                  <li>Carregando atividades...</li>
                              </ul>
                         </div>
                         <div class="dashboard-card">
                             <h3>Status dos Chamados</h3>
                             <p id="dashboard-demand-status">Abertos: 0 | Em Andamento: 0 | Conclu√≠dos: 0</p>
                         </div>
                         <div class="dashboard-card">
                             <h3>Chamados Abertos/Andamento</h3>
                             <ul id="dashboard-open-demands">
                                 <li>Nenhum chamado aberto.</li>
                             </ul>
                         </div>
                     </div>
                 </div>

                 <div id="demand-list-screen" class="content-section">
                     <button class="btn btn-secondary back-to-dashboard" data-target="dashboard-screen">< Voltar</button>
                     <h2>Lista de Chamados Registrados</h2>
                     <table class="data-table">
                         <thead>
                             <tr>
                                 <th>ID</th>
                                 <th>Descri√ß√£o</th>
                                 <th>Prioridade</th>
                                 <th>Data Solic.</th>
                                 <th>Status</th>
                                 <th>A√ß√µes</th>
                             </tr>
                         </thead>
                         <tbody id="demand-list-table-body">
                         </tbody>
                     </table>
                      <div id="demand-details-section" style="margin-top: 20px; padding: 15px; border: 1px solid #eee; display: none;">
                          <h3>Detalhes do Chamado #<span id="details-demand-id"></span></h3>
                          <p><strong>Descri√ß√£o:</strong> <span id="details-demand-description"></span></p>
                          <p><strong>Prioridade:</strong> <span id="details-demand-priority"></span></p>
                          <p><strong>Status Atual:</strong> <span id="details-demand-status"></span></p>
                          <div class="form-group">
                              <label for="demand-actions-performed">A√ß√µes Realizadas:</label>
                              <textarea id="demand-actions-performed" rows="3" placeholder="Descreva o que foi feito para resolver o chamado..."></textarea>
                          </div>
                          <button id="complete-demand-btn" class="btn btn-primary">Marcar como Conclu√≠do</button>
                          <button id="start-demand-btn" class="btn btn-secondary">Iniciar Atendimento</button>
                      </div>
                 </div>

                 <div id="demand-register-screen" class="content-section">
                     <button class="btn btn-secondary back-to-dashboard" data-target="dashboard-screen">< Voltar</button>
                     <h2>Registro de Demanda</h2>
                     <form id="demand-form">
                          <div class="form-group">
                             <label for="demand-description">Descri√ß√£o Detalhada:</label>
                             <textarea id="demand-description" name="description" rows="4" required></textarea>
                         </div>
                         <div class="form-group">
                             <label for="demand-priority">Prioridade:</label>
                             <select id="demand-priority" name="priority" required>
                                 <option value="Baixa">Baixa</option>
                                 <option value="M√©dia">M√©dia</option>
                                 <option value="Alta">Alta</option>
                             </select>
                         </div>
                          <div class="form-group">
                             <label for="demand-date">Data da Solicita√ß√£o:</label>
                             <input type="date" id="demand-date" name="request_date" value="" required readonly>
                         </div>
                          <div class="form-group">
                             <label for="demand-due-date">Previs√£o de Conclus√£o:</label>
                             <input type="date" id="demand-due-date" name="due_date">
                         </div>
                         <div class="form-group">
                             <label for="demand-attachments">Anexar Arquivos:</label>
                             <input type="file" id="demand-attachments" name="attachments" multiple>
                         </div>
                         <button type="submit" class="btn btn-primary">Registrar Demanda</button>
                     </form>
                 </div>

                 <div id="history-screen" class="content-section">
                      <button class="btn btn-secondary back-to-dashboard" data-target="dashboard-screen">< Voltar</button>
                     <h2>Hist√≥rico de Manuten√ß√£o</h2>
                     <table class="data-table">
                         <thead>
                             <tr>
                                 <th>Data Conclus√£o</th>
                                 <th>T√©cnico</th>
                                 <th>Demanda Original (ID)</th>
                                 <th>Descri√ß√£o do Servi√ßo Realizado</th>
                                 <th>Status</th>
                             </tr>
                         </thead>
                         <tbody id="history-table-body">
                         </tbody>
                     </table>
                 </div>

                 <div id="chat-screen" class="content-section">
                      <button class="btn btn-secondary back-to-dashboard" data-target="dashboard-screen">< Voltar</button>
                      <h2>Chat Suporte</h2>
                       <div class="chat-container">
                             <div class="chat-list">
                                 <h4>Conversas</h4>
                                 <button class="chat-item active">Cliente X (Demanda #125)</button>
                                 <button class="chat-item">T√©cnico Silva</button>
                                 <button class="chat-item">Gestor Ana</button>
                                 <button class="chat-item">Suporte TI Geral</button>
                             </div>
                             <div class="chat-window">
                                 <div class="chat-messages">
                                     <div class="message received">
                                         <span class="sender">Cliente X:</span>
                                         <p>Ol√°, meu monitor est√° piscando.</p>
                                         <span class="timestamp">10:30</span>
                                     </div>
                                     <div class="message sent">
                                          <span class="sender">Voc√™ (T√©cnico Jo√£o):</span>
                                          <p>Entendido. Estou a caminho para verificar. Previs√£o de 15 minutos.</p>
                                          <span class="timestamp">10:31</span>
                                     </div>
                                      <div class="message received">
                                         <span class="sender">Cliente X:</span>
                                         <p>Ok, obrigado!</p>
                                         <span class="timestamp">10:32</span>
                                     </div>
                                 </div>
                                 <div class="chat-input">
                                     <input type="text" placeholder="Digite sua mensagem...">
                                     <button class="btn btn-icon" title="Anexar Arquivo">üìé</button>
                                     <button class="btn btn-primary">Enviar</button>
                                 </div>
                             </div>
                       </div>
                        <p style="margin-top: 15px; font-style: italic; color: #888;">(Funcionalidade de chat n√£o implementada neste prot√≥tipo)</p>
                 </div>

                 <div id="stock-screen" class="content-section">
                      <button class="btn btn-secondary back-to-dashboard" data-target="dashboard-screen">< Voltar</button>
                     <h2>Gest√£o de Estoque</h2>

                     <h3>Invent√°rio</h3>
                      <table class="data-table">
                         <thead>
                             <tr>
                                 <th>Item</th>
                                 <th>Quantidade</th>
                                 <th>N√≠vel M√≠nimo</th>
                                 <th>A√ß√µes</th>
                             </tr>
                         </thead>
                         <tbody id="stock-table-body">
                         </tbody>
                     </table>
                      <div class="form-container" style="margin-top:20px;">
                          <h4>Adicionar Novo Item</h4>
                          <form id="add-stock-item-form" style="display:flex; gap: 10px; align-items: flex-end;">
                              <div class="form-group" style="flex-grow: 1;">
                                  <label for="stock-item-name">Nome:</label>
                                  <input type="text" id="stock-item-name" required>
                              </div>
                              <div class="form-group">
                                  <label for="stock-item-qty">Qtd:</label>
                                  <input type="number" id="stock-item-qty" min="0" value="1" required style="width: 70px;">
                              </div>
                               <div class="form-group">
                                  <label for="stock-item-min-qty">M√≠n:</label>
                                  <input type="number" id="stock-item-min-qty" min="0" value="1" required style="width: 70px;">
                              </div>
                              <button type="submit" class="btn btn-primary">Adicionar</button>
                          </form>
                      </div>
                 </div>

                <!-- ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà MODIFICADO ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà -->
                <div id="environments-screen" class="content-section">
                     <button class="btn btn-secondary back-to-dashboard" data-target="dashboard-screen">< Voltar</button>
                    <h2>Cadastro de Ambientes e Setores</h2>
                    <div class="form-container">
                        <h3>Adicionar/Editar Ambiente</h3>
                        <form id="environment-form">
                             <input type="hidden" id="env-edit-id">
                             <div class="form-group">
                                <label for="env-name">Nome:</label>
                                <input type="text" id="env-name" name="name" required>
                            </div>
                             <div class="form-group">
                                <label for="env-location">Localiza√ß√£o:</label>
                                <input type="text" id="env-location" name="location">
                            </div>
                             <div class="form-group">
                                <label for="env-equipment">Equipamentos (um por linha):</label>
                                <textarea id="env-equipment" name="equipment" rows="3" placeholder="Ex: PC-01 Dell Optiplex, Projetor Epson X39"></textarea>
                            </div>

                            <!-- Se√ß√£o de Respons√°veis Din√¢mica -->
                            <div class="form-group">
                                <label>Respons√°veis por Hor√°rio:</label>
                                <div id="responsibilities-list">
                                    <!-- Inputs de respons√°vel ser√£o adicionados aqui pelo JS -->
                                </div>
                                <button type="button" id="add-responsibility-btn" class="btn btn-sm btn-secondary" style="margin-top: 5px;">+ Adicionar Respons√°vel</button>
                            </div>
                            <!-- Fim Se√ß√£o de Respons√°veis -->

                            <button type="submit" class="btn btn-primary">Salvar Ambiente</button>
                            <button type="button" id="cancel-edit-env-btn" class="btn btn-secondary" style="display: none;">Cancelar Edi√ß√£o</button>
                        </form>
                    </div>

                    <div class="list-container">
                        <h3>Ambientes Cadastrados</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Localiza√ß√£o</th>
                                    <th>Respons√°veis (Hor√°rio/Turno)</th> <!-- Coluna Modificada -->
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                             <tbody id="environments-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà FIM MODIFICADO ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà -->

            </main>
        </div>

        <!-- ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà NOVO SCREEN ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà -->
        <div id="fault-report-screen" class="screen fault-report-style">
            <div class="fault-report-container">
                 <span class="logo-placeholder">SENAI Blumenau</span>
                <h2>Relatar Equipamento com Falha</h2>
                <p>Use este formul√°rio para reportar um problema com um equipamento.</p>
                 <div id="fault-report-feedback" class="notification" style="position: static; display: none; margin-bottom: 15px;"></div>
                 <form id="fault-report-form">
                    <div class="form-group">
                        <label for="fault-environment">Ambiente/Sala:</label>
                        <select id="fault-environment" name="environment_id" required>
                            <option value="">Selecione o ambiente...</option>
                            <!-- Op√ß√µes populadas pelo JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="fault-equipment">Equipamento (Identifica√ß√£o/Nome):</label>
                        <input type="text" id="fault-equipment" name="equipment_name" placeholder="Ex: Computador da mesa 3, Impressora do corredor" required>
                    </div>
                    <div class="form-group">
                        <label for="fault-description">Descri√ß√£o do Problema:</label>
                        <textarea id="fault-description" name="description" rows="4" placeholder="Descreva o que est√° acontecendo..." required></textarea>
                    </div>
                     <div class="form-group">
                        <label for="fault-reporter-name">Seu Nome (Opcional):</label>
                        <input type="text" id="fault-reporter-name" name="reporter_name">
                    </div>
                    <button type="submit" class="btn btn-primary">Enviar Relat√≥rio</button>
                    <a href="#" id="back-to-login-link" class="forgot-password" style="display: block; margin-top: 10px;">Voltar para Login</a>
                 </form>
            </div>
        </div>
        <!-- ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà FIM NOVO SCREEN ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà -->


        <div id="notification-area" class="notification"></div>

    </div>

    <script src="script.js"></script>
</body>
</html>